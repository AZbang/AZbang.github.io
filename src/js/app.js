"use strict";

const Handlebars = require('handlebars');
const $ = require('jquery');
const data = require('./data');
const helper = require("./delaunay/modules/helper");
const World = require("./delaunay/World");
const TriangulationSystem = require("./delaunay/TriangulationSystem");

$(() => {
	Handlebars.registerHelper('markdown', require('helper-markdown'));
	var source = $("#template").html();
	var template = Handlebars.compile(source);
	$('body').html(template(data));


	var world = new World({
		view: document.getElementById('background'),
		root: $('#main')
	});
	window.onresize = world.resize.bind(world);


	var system = world.addObject(TriangulationSystem, {
		vertices: [[195, 628, true], [209, 596, true], [226, 557, true], [241, 518, true], [250, 492, true], [261, 459, true], [271, 424, true], [285, 388, true], [298, 353, true], [304, 333, true], [339, 332, true], [373, 330, true], [388, 367, true], [397, 397, true], [407, 426, true], [420, 461, true], [429, 488, true], [439, 523, true], [451, 551, true], [462, 580, true], [469, 606, true], [478, 628, true], [442, 628, true], [410, 628, true], [396, 592, true], [299, 547, true], [288, 578, true], [276, 608, true], [269, 628, true], [231, 630, true], [333, 360, true], [376, 398, true], [333, 388, true], [323, 425, true], [367, 441, true], [311, 474, true], [280, 504, true], [266, 545, true], [235, 579, true], [259, 607, true], [262, 568, true], [374, 468, true], [417, 507, true], [384, 545, true], [421, 560, true], [445, 586, true], [415, 593, true], [352, 480, true], [500, 329, true], [498, 357, true], [499, 379, true], [500, 396, true], [528, 396, true], [556, 397, true], [580, 398, true], [604, 397, true], [618, 398, true], [602, 424, true], [591, 441, true], [577, 458, true], [561, 481, true], [542, 503, true], [530, 521, true], [518, 541, true], [501, 562, true], [499, 581, true], [498, 604, true], [499, 627, true], [532, 628, true], [569, 626, true], [598, 625, true], [624, 627, true], [662, 627, true], [691, 628, true], [691, 592, true], [693, 563, true], [651, 561, true], [606, 562, true], [572, 561, true], [603, 519, true], [634, 472, true], [671, 425, true], [693, 399, true], [691, 358, true], [692, 334, true], [625, 331, true], [563, 331, true], [519, 345, true], [533, 360, true], [565, 348, true], [612, 352, true], [581, 373, true], [638, 363, true], [660, 341, true], [681, 377, true], [657, 408, true], [624, 423, true], [624, 465, true], [582, 494, true], [556, 540, true], [534, 572, true], [560, 592, true], [614, 589, true], [645, 587, true], [677, 597, true], [671, 570, true], [621, 614, true], [527, 609, true], [572, 518, true], [638, 440, true], [723, 332, true], [723, 358, true], [723, 380, true], [723, 408, true], [724, 433, true], [724, 466, true], [722, 497, true], [722, 527, true], [722, 552, true], [721, 573, true], [723, 603, true], [723, 625, true], [758, 626, true], [795, 630, true], [824, 625, true], [854, 614, true], [873, 601, true], [889, 570, true], [892, 542, true], [884, 514, true], [868, 496, true], [868, 466, true], [886, 443, true], [887, 443, true], [893, 410, true], [890, 380, true], [873, 357, true], [851, 341, true], [822, 335, true], [788, 332, true], [752, 332, true], [742, 357, true], [817, 370, true], [864, 414, true], [848, 435, true], [761, 488, true], [784, 525, true], [842, 524, true], [862, 557, true], [851, 580, true], [803, 597, true], [771, 561, true], [824, 548, true], [757, 601, true], [794, 467, true], [822, 411, true], [787, 416, true], [776, 368, true], [751, 432, true], [753, 528, true], [924, 590, true], [940, 548, true], [970, 460, true], [984, 420, true], [993, 382, true], [1010, 333, true], [1099, 370, true], [1109, 405, true], [1119, 433, true], [1129, 459, true], [1134, 480, true], [1144, 509, true], [1153, 537, true], [1165, 570, true], [1175, 597, true], [1185, 626, true], [1147, 627, true], [1116, 628, true], [1100, 587, true], [1089, 555, true], [1023, 511, true], [1009, 544, true], [995, 578, true], [985, 605, true], [978, 628, true], [1041, 401, true], [1068, 351, true], [1027, 359, true], [1083, 405, true], [1076, 434, true], [1013, 445, true], [1050, 470, true], [1094, 493, true], [1127, 536, true], [1119, 565, true], [1147, 603, true], [961, 568, true], [997, 499, true], [985, 532, true], [998, 452, true], [1049, 439, true], [1210, 626, true], [1210, 580, true], [1211, 537, true], [1211, 502, true], [1212, 473, true], [1212, 427, true], [1211, 390, true], [1210, 351, true], [1210, 332, true], [1242, 331, true], [1276, 332, true], [1297, 373, true], [1314, 407, true], [1329, 437, true], [1342, 468, true], [1360, 500, true], [1361, 450, true], [1361, 400, true], [1361, 365, true], [1362, 330, true], [1394, 330, true], [1425, 331, true], [1430, 373, true], [1423, 403, true], [1423, 441, true], [1424, 478, true], [1422, 508, true], [1423, 549, true], [1423, 575, true], [1425, 602, true], [1424, 626, true], [1387, 627, true], [1357, 629, true], [1342, 598, true], [1322, 556, true], [1308, 520, true], [1290, 486, true], [1271, 460, true], [1272, 485, true], [1274, 520, true], [1274, 546, true], [1272, 577, true], [1271, 605, true], [1273, 627, true], [1240, 629, true], [1235, 586, true], [1247, 544, true], [1233, 512, true], [1248, 472, true], [1242, 435, true], [1232, 402, true], [1248, 359, true], [1285, 395, true], [1261, 425, true], [1305, 465, true], [1334, 484, true], [1340, 528, true], [1375, 570, true], [1398, 548, true], [1399, 505, true], [1385, 468, true], [1402, 446, true], [1362, 472, true], [1391, 389, true], [1375, 363, true], [1409, 346, true], [1385, 425, true], [1378, 530, true], [1400, 600, true], [1363, 584, true], [1296, 433, true], [1674, 446, true], [1670, 404, true], [1656, 369, true], [1633, 344, true], [1606, 328, true], [1560, 325, true], [1529, 325, true], [1497, 337, true], [1481, 356, true], [1463, 380, true], [1454, 410, true], [1449, 436, true], [1449, 467, true], [1446, 500, true], [1449, 531, true], [1465, 585, true], [1480, 599, true], [1507, 618, true], [1537, 628, true], [1559, 628, true], [1590, 628, true], [1619, 611, true], [1645, 584, true], [1663, 556, true], [1673, 528, true], [1631, 481, true], [1587, 482, true], [1562, 482, true], [1561, 518, true], [1560, 537, true], [1589, 538, true], [1613, 536, true], [1597, 557, true], [1577, 563, true], [1548, 564, true], [1522, 553, true], [1508, 525, true], [1504, 493, true], [1503, 458, true], [1510, 430, true], [1520, 404, true], [1539, 391, true], [1562, 386, true], [1584, 388, true], [1607, 400, true], [1616, 424, true], [1617, 441, true], [1619, 451, true], [1644, 450, true], [1653, 422, true], [1629, 396, true], [1633, 373, true], [1566, 351, true], [1513, 365, true], [1479, 387, true], [1488, 428, true], [1463, 469, true], [1481, 507, true], [1490, 553, true], [1467, 553, true], [1516, 590, true], [1549, 597, true], [1602, 590, true], [1625, 556, true], [1655, 501, true], [1610, 506, true], [1577, 503, true], [186, 313], [246, 172], [424, 129], [617, 131], [883, 135], [1005, 140], [1214, 132], [1434, 138], [1597, 146], [1761, 170], [1855, 300], [1863, 480], [1845, 628], [1791, 732], [1637, 803], [1311, 840], [907, 862], [542, 853], [309, 814], [120, 778], [0, 616], [14, 404], [72, 157], [282, 16], [856, 10], [1352, 18], [1824, 28], [513, 180], [599, 56], [759, 194], [871, 220], [1032, 203], [1209, 194], [1288, 68], [1479, 228], [1334, 207], [1578, 71], [1717, 258], [1778, 362], [1770, 480], [1767, 616], [1697, 719], [1495, 775], [1465, 911], [1183, 788], [1213, 758], [1009, 779], [757, 827], [734, 907], [594, 729], [400, 852], [149, 911], [409, 988], [0, 901], [4, 723], [0, 467], [0, 258], [0, 95], [0, 4], [549, 690], [677, 724], [755, 735], [885, 789], [1014, 738], [1163, 744], [896, 713], [1296, 716], [1442, 702], [1580, 738], [1840, 836], [1668, 921], [1079, 983], [716, 985], [44, 984], [0, 386], [1919, 427], [1919, 242], [1919, 168], [1919, 25], [1919, 615], [1919, 863], [1919, 988], [1652, 988], [1374, 988], [915, 477], [936, 399], [920, 292], [484, 452], [447, 368], [451, 291], [336, 590], [338, 674], [263, 725], [425, 737], [1177, 488], [1150, 360], [1134, 250], [1192, 671], [1461, 623], [1497, 716], [1382, 768], [1561, 851], [1724, 575], [1646, 677], [1722, 364], [1654, 294], [1042, 81], [1557, 437], [1306, 601], [1324, 677], [1244, 815], [1130, 886], [986, 922], [113, 479], [191, 411], [89, 624], [400, 230], [618, 212], [810, 206], [958, 208], [1128, 163], [694, 379, true], [710, 345], [715, 405], [704, 431], [690, 465], [652, 448, true], [625, 535], [591, 539, true], [676, 512], [707, 583], [709, 555], [708, 613], [478, 530], [482, 578], [487, 617], [361, 534], [922, 511], [912, 565], [906, 579], [889, 621], [1049, 616], [1063, 531], [1032, 526], [1188, 554], [1196, 614], [1187, 574], [1294, 549], [1284, 503], [1328, 353], [1346, 419], [1350, 460], [1457, 346], [1442, 406], [1436, 469], [1433, 513], [1442, 568], [1440, 556], [1660, 467], [1630, 468], [1533, 487], [1536, 525], [1558, 548], [1592, 547], [555, 435], [591, 411], [837, 483, true], [1174, 431], [103, 670], [213, 804], [288, 913], [375, 695], [337, 639], [477, 719], [598, 788], [819, 767], [828, 700], [1088, 723], [1092, 817], [995, 879], [1241, 934], [1383, 837], [1611, 869], [1776, 800], [1839, 667], [1734, 654], [1831, 545], [1829, 433], [1739, 411], [1728, 463], [1751, 518], [1788, 280], [1821, 197], [1633, 228], [1545, 185], [1384, 167], [1300, 261], [1177, 230], [1273, 184], [1354, 118], [895, 252], [692, 228], [730, 159], [584, 176], [361, 105], [492, 53], [689, 77], [254, 231], [180, 145], [96, 283], [109, 409], [58, 538], [39, 791], [274, 956], [542, 939], [629, 872], [452, 851], [825, 915], [893, 944], [1503, 953], [1810, 953], [157, 57], [80, 220], [1453, 555, true], [1660, 483, true], [1591, 445], [1361, 421, true], [661, 332, true], [672, 562, true], [1707, 454], [1737, 533], [1692, 672], [1808, 391], [1747, 292], [1540, 252], [1544, 252], [1431, 244], [1515, 161], [1069, 169], [1170, 43], [919, 64], [786, 82], [173, 755], [617, 956], [708, 362], [800, 274], [563, 252], [1038, 261], [293, 429, true], [363, 783], [355, 919], [991, 277], [1753, 81], [1881, 199], [1712, 880], [1363, 929], [61, 39], [451, -92], [93, -92], [670, 11], [1063, -92], [1055, 17], [1484, -92], [1543, 16], [1449, 45], [1857, -92], [1734, 19], [1508, 987], [912, 629, true], [943, 628, true], [954, 505, true], [975, 504, true], [1073, 509, true], [1050, 510, true], [1099, 523, true], [1079, 528, true], [1082, 457, true], [453, 418], [511, 491], [163, 528], [504, 777], [1675, 484, true], [1048, 333, true], [1089, 331, true], [343, 507, true], [373, 505, true], [310, 508, true], [811, 499, true], [1351, 559, true], [170, 987]],
		animationSpeed: 0.2
	});
	world.ticker.start();
	system.points[helper.randRange(0, system.points.length)].start();
});